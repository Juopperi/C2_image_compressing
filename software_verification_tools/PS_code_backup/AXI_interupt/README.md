# AXI 中断测试程序

这个程序用于测试AXI接口中断模块的功能。该测试程序通过内存映射方式访问FPGA上的AXI接口模块，并测试其中断延时功能。

## 功能特点

- 通过内存映射方式访问AXI寄存器
- 发送测试数据，触发中断处理
- 等待延时中断（1秒钟）
- 验证数据回传功能
- 清除中断和复位状态机

## 编译方法

使用提供的Makefile进行编译：

```bash
make
```

## 使用方法

1. 确保FPGA已经被正确配置并运行AXI中断测试模块
2. 运行测试程序（需要root权限访问/dev/mem）：

```bash
sudo ./axi_interrupt_test
```

## 寄存器映射

程序默认使用以下地址映射：

- `0x43C00000`: S00_AXI接口基地址（数据接口）
- `0x43C10000`: S_AXI_INTR接口基地址（中断接口）

如果您的系统地址映射不同，请修改main.cpp中的基地址定义。

## 执行流程

1. 初始化系统，映射寄存器
2. A. 启用数据接口的中断使能寄存器
   B. 启用中断接口的中断使能寄存器
3. 写入测试数据 (0xA5A5A5A5) 到数据寄存器
4. 等待中断触发（最多5秒）
5. 读取状态寄存器和数据寄存器
6. 验证读取的数据是否与写入的数据相同
7. 清除中断并重置状态机

## 注意事项

- 需要根据实际FPGA布局调整基地址
- 该程序需要在Linux嵌入式平台（如Xilinx Zynq）上运行
- 程序需要root权限访问/dev/mem
- 对于实际生产环境，建议使用Xilinx驱动程序框架代替直接内存访问 